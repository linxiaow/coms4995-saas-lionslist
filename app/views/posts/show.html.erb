<!--  app/views/posts/show.html.erb -->
<h2>Title: <em><%= @post.title %></em></h2>

<ul id="details">
  <li>
    Category:
    <%= @post.category %>
  </li>
  <li>
    Created on:
    <%= @post.created_at %>
  </li>
  <li>
    Last Updated:
    <%= @post.updated_at %>
  </li>
  <li>
    Author:
    <%= link_to "#{@post.author}", other_profile_path(@userid) %>
  </li>
</ul>

<h3>Content:</h3>
<p id="content">
  <%= @post.content %>
</p>

<div class="row">
  <% if @post.author_id == @current_user_id.to_s %>
    <%= link_to 'Edit', edit_post_path(@post), :class => 'btn btn-primary col-2' %>
    <%= link_to 'Delete', post_path(@post), 'data-method' => 'delete', 'data-confirm' => 'Are you sure?', :class => 'btn btn-danger col-2' %>
  <% end %>
  <%= link_to 'Back to post list', posts_path, :class => 'btn btn-primary col-2' %>
</div>

<h3>Leave your comments:</h3>
<%= form_tag add_comment_path, :class => 'form' do %>
  <%= label :comment, :content, 'Content', :class => 'col-form-label' %>
  <%= text_field :comment, 'content', :class => 'form-control' %>
  <br/>
  <%= submit_tag 'Save', :class => 'btn btn-primary' %>
  <%= link_to 'Cancel', show_post_path, :class => 'btn btn-secondary' %>
<% end %>

<% @post.comments.each do |comment| %>
  <ul>
    <li>
      <%= link_to "#{comment.author}", other_profile_path(comment.author_id) %> said
    </li>
    <li>
      <%= comment.content %>
    </li>
    <li>
      At <%= comment.created_at %>
    </li>
  </ul>
<% end %>
