<!-- Product section-->
<section class="py-5">
    <div class="container px-4 px-lg-5 my-5">
        <div class="row gx-4 gx-lg-5 align-items-center">
            <div class="col-md-4">
              <% if @post.cover.attached? || @post.images.attached? %>
                <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
                  <div class="carousel-inner">
                      <% if @post.cover.attached? %>
                        <div class="carousel-item active">
                          <%= image_tag @post.cover, :class => "d-block img-fluid mb-4", :style => "width: 400px; height: 400px" %>
                        </div>
                      <% end %>
                      <% if @post.images.attached? %>
                        <% @post.images.each do |image| %>
                          <div class="carousel-item">
                            <%= image_tag image, :class => "d-block img-fluid mb-4", :style => "width: 400px; height: 400px" %>
                          </div>
                        <% end %>
                      <% end %>
                  </div>
                  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                  </button>
                  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                  </button>
                </div>
              <% else %>
                <img class="card-img-top mb-5 mb-md-0" src="https://st.depositphotos.com/1605004/3032/v/600/depositphotos_30323235-stock-illustration-great-deal-stamp.jpg" alt="..." />
              <% end %>
            </div>
            <div class="col-md-6">
                <div class="small mb-1"><%= @post.category %></div>
                <h1 class="display-5 fw-bolder"><%= @post.title %></h1>
                <div class="fs-4 mb-5">
                    <span>posted by <%= link_to "#{@post.author}", other_profile_path(@userid) %></span>
                </div>
                <p class="lead"><%= @post.content %></p>
            </div>
        </div>
    </div>
</section>

<div class="detail_btns container px-6 px-lg-5">
  <% if @post.author_id == @current_user_id.to_s %>
    <%= link_to 'Edit', edit_post_path(@post), :class => 'btn btn-outline-info col-2' %>
    <%= link_to 'Delete', post_path(@post), 'data-method' => 'delete', 'data-confirm' => 'Are you sure?', :class => 'btn btn-outline-danger col-2' %>
  <% end %>
  <%= link_to 'Back to Homepage', posts_path, :class => 'btn btn-outline-info col-2'%>
</div>

<div class="container px-6 px-lg-5">
  <% @post.comments.each do |comment| %>
        <p><%= link_to "#{comment.author}", other_profile_path(comment.author_id) %> at <%= comment.created_at %>:</p>
        <p><%= comment.content %></p>
        <hr style="text-align:left;margin-left:0">
  <% end %>
</div>

<div class="comment_header container px-6 px-lg-5">Leave your comments:</div>
<%= form_tag add_comment_path, :class => 'form' do %>
  <br/>
  <div class="comment_form container px-6 px-lg-5">
    <%= text_area :comment, 'content', :class => 'form-control', :id => 'comment-content-box' %>
  </div>

  <div class="comment_btns">
    <%= submit_tag 'Save', :class => 'btn btn-outline-info' %>
    <%= link_to 'Cancel', show_post_path, :class => 'btn btn-outline-secondary' %>
  </div>
<% end %>